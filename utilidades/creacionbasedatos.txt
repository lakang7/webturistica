create table categoria(
   idcategoria SERIAL,
   nombre VARCHAR(45) NOT NULL,
   hijos INTEGER NOT NULL,  
   CONSTRAINT pk_categoria PRIMARY KEY (idcategoria)   
);

create table subcategoria(
   idsubcategoria SERIAL,
   idcategoria INTEGER NOT NULL,
   nombre VARCHAR(45) NOT NULL,
   icono VARCHAR(200),   
   CONSTRAINT pk_subcategoria PRIMARY KEY (idsubcategoria),
   CONSTRAINT fk_subcategoria_idcategoria FOREIGN KEY (idcategoria) REFERENCES categoria (idcategoria)   
);

create table comodidad(
   idcomodidad SERIAL,
   nombre VARCHAR(45) NOT NULL,
   posX INTEGER NOT NULL,  
   posY INTEGER NOT NULL,  
   CONSTRAINT pk_comodidad PRIMARY KEY (idcomodidad)   
);

create table ruta(
   idruta SERIAL,
   nombre VARCHAR(100) NOT NULL,
   resena VARCHAR(1200) NOT NULL,
   CONSTRAINT pk_ruta PRIMARY KEY (idruta)   
);

create table sitio(
   idsitio SERIAL,
   idsubcategoria INTEGER NOT NULL,
   idruta INTEGER NOT NULL,
   nombre VARCHAR(100) NOT NULL,
   direccion VARCHAR(400) NOT NULL,
   telefono1 VARCHAR(12),
   telefono2 VARCHAR(12),
   correo VARCHAR(60),
   resena VARCHAR(2000),
   pagfacebook VARCHAR(200),
   pagtwitter VARCHAR(200),
   logo VARCHAR(200),
   latitud VARCHAR(200),
   longitud VARCHAR(200),
   imagen_perfil VARCHAR(200),
   CONSTRAINT pk_sitio PRIMARY KEY (idsitio),
   CONSTRAINT fk_sitio_idsubcategoria FOREIGN KEY (idsubcategoria) REFERENCES subcategoria (idsubcategoria),     
   CONSTRAINT fk_sitio_idruta FOREIGN KEY (idruta) REFERENCES ruta (idruta)
);

create table hospedaje(
   idhospedaje SERIAL,
   idsitio INTEGER NOT NULL,
   promedio_servicio NUMERIC NOT NULL,
   promedio_ubicacion NUMERIC NOT NULL,
   promedio_limpieza NUMERIC NOT NULL,
   promedio_personal NUMERIC NOT NULL,
   promedio NUMERIC NOT NULL,
   CONSTRAINT pk_hospedaje PRIMARY KEY (idhospedaje),
   CONSTRAINT fk_hospedaje_idsitio FOREIGN KEY (idsitio) REFERENCES sitio (idsitio)
);

create table hospedaje_comodidad(
   idhospedaje_comodidad SERIAL,
   idhospedaje INTEGER NOT NULL,
   idcomodidad INTEGER NOT NULL,   
   CONSTRAINT pk_hospedaje_comodidad PRIMARY KEY (idhospedaje_comodidad),
   CONSTRAINT fk_hospedaje_comodidad_idhospedaje FOREIGN KEY (idhospedaje) REFERENCES hospedaje (idhospedaje),
   CONSTRAINT fk_hospedaje_comodidad_idcomodidad FOREIGN KEY (idcomodidad) REFERENCES comodidad (idcomodidad)
);

create table gastronomia(
   idgastronomia SERIAL,
   idsitio INTEGER NOT NULL,
   promedio_comida NUMERIC NOT NULL,
   promedio_servicio NUMERIC NOT NULL,
   promedio_ambiente NUMERIC NOT NULL,
   promedio_higiene NUMERIC NOT NULL,
   promedio_precio NUMERIC NOT NULL,
   promedio NUMERIC NOT NULL,
   CONSTRAINT pk_gastronomia PRIMARY KEY (idgastronomia),
   CONSTRAINT fk_gastronomia_idsitio FOREIGN KEY (idsitio) REFERENCES sitio (idsitio)
);

create table especialidad(
   idespecialidad SERIAL,
   nombre VARCHAR(45),
   descripcion VARCHAR(600),
   CONSTRAINT pk_especialidad PRIMARY KEY (idespecialidad)   
);

create table gastronomia_especialidad(
   idgastronomia_especialidad SERIAL,
   idgastronomia INTEGER NOT NULL,
   idespecialidad INTEGER NOT NULL,   
   CONSTRAINT pk_gastronomia_especialidad PRIMARY KEY (idgastronomia_especialidad),
   CONSTRAINT fk_gastronomia_especialidad_idgastronomia FOREIGN KEY (idgastronomia) REFERENCES gastronomia (idgastronomia),
   CONSTRAINT fk_gastronomia_especialidad_idespecialidad FOREIGN KEY (idespecialidad) REFERENCES especialidad (idespecialidad)
);

create table punto_ruta(
   idpunto_ruta SERIAL,
   idruta INTEGER NOT NULL,
   latitud VARCHAR(200),
   longitud VARCHAR(200),
   CONSTRAINT pk_punto_ruta PRIMARY KEY (idpunto_ruta),
   CONSTRAINT fk_punto_ruta_idruta FOREIGN KEY (idruta) REFERENCES ruta (idruta)
);

--------------------------------------------------------------FALTA CREAR ESTAS
create table foto_ruta(
   idfoto_ruta SERIAL,
   idpunto_ruta INTEGER NOT NULL,
   foto VARCHAR(200),
   CONSTRAINT pk_foto_ruta PRIMARY KEY (idfoto_ruta),
   CONSTRAINT fk_foto_ruta_idpuntoruta FOREIGN KEY (idpunto_ruta) REFERENCES punto_ruta (idpunto_ruta)
);

create table foto_sitio(
   idfoto_sitio SERIAL,
   idsitio INTEGER NOT NULL,
   fecha DATE,
   foto VARCHAR(200),
   CONSTRAINT pk_foto_sitio PRIMARY KEY (idfoto_sitio),
   CONSTRAINT fk_foto_sitio_idsitio FOREIGN KEY (idsitio) REFERENCES sitio (idsitio)
);

create table tipo_habitacion(
   idtipo_habitacion SERIAL,
   nombre VARCHAR(45),
   capacidad INTEGER,
   CONSTRAINT pk_tipo_habitacion PRIMARY KEY (idtipo_habitacion)   
);

create table hospedaje_tipo_habitacion(
   idhospedaje_tipo_habitacion SERIAL,
   idtipo_habitacion INTEGER NOT NULL,
   idhospedaje INTEGER NOT NULL,
   numerohabitaciones INTEGER,
   CONSTRAINT pk_hospedaje_tipo_habitacion PRIMARY KEY (idhospedaje_tipo_habitacion),
   CONSTRAINT fk_hospedaje_tipo_habitacion_idtipo_habitacion FOREIGN KEY (idtipo_habitacion) REFERENCES tipo_habitacion (idtipo_habitacion),
   CONSTRAINT fk_hospedaje_tipo_habitacion_idhospedaje FOREIGN KEY (idhospedaje) REFERENCES hospedaje (idhospedaje)
);

create table servicio(
   idservicio SERIAL,
   nombre VARCHAR(45),
   CONSTRAINT pk_servicios PRIMARY KEY (idservicio)   
);

create table gastronomia_servicio(
   idgastronomia_servicios SERIAL,
   idgastronomia INTEGER NOT NULL,
   idservicio INTEGER NOT NULL,   
   CONSTRAINT pk_gastronomia_servicio PRIMARY KEY (idgastronomia_servicios),
   CONSTRAINT fk_gastronomia_servicio_idgastronomia FOREIGN KEY (idgastronomia) REFERENCES gastronomia (idgastronomia),
   CONSTRAINT fk_gastronomia_servicio_idservicio FOREIGN KEY (idservicio) REFERENCES servicio (idservicio)
);

create table horario(
   idhorario SERIAL,
   idsitio INTEGER NOT NULL,
   diainicio VARCHAR(45),
   diafin VARCHAR(45),
   horainicio time without time zone,
   horafin time without time zone,
   CONSTRAINT pk_horario PRIMARY KEY (idhorario),
   CONSTRAINT fk_sitio_idsitio FOREIGN KEY (idsitio) REFERENCES sitio (idsitio)
);

create table medio_pago(
   idmedio_pago SERIAL,
   nombre VARCHAR(45),
   icono VARCHAR(200),
   CONSTRAINT pk_medio_pago PRIMARY KEY (idmedio_pago)   
);

create table sitio_medio_pago(
   idsitio_medio_pago SERIAL,
   idsitio INTEGER NOT NULL,
   idmedio_pago INTEGER NOT NULL,
   CONSTRAINT pk_sitio_medio_pago PRIMARY KEY (idsitio_medio_pago),
   CONSTRAINT fk_sitio_idsitio FOREIGN KEY (idsitio) REFERENCES sitio (idsitio),
   CONSTRAINT fk_medio_pago FOREIGN KEY (idmedio_pago) REFERENCES medio_pago (idmedio_pago)
);

INSERT INTO categoria values(nextval('categoria_idcategoria_seq'),'Hospedaje',2);
INSERT INTO categoria values(nextval('categoria_idcategoria_seq'),'Gastronomia',2);
INSERT INTO categoria values(nextval('categoria_idcategoria_seq'),'Recreación',4);
INSERT INTO categoria values(nextval('categoria_idcategoria_seq'),'Religión',4);
INSERT INTO categoria values(nextval('categoria_idcategoria_seq'),'Cultura',2);
INSERT INTO categoria values(nextval('categoria_idcategoria_seq'),'Salud',3);
INSERT INTO categoria values(nextval('categoria_idcategoria_seq'),'Dinero',2);
INSERT INTO categoria values(nextval('categoria_idcategoria_seq'),'Estaciones de Servicio',1);

INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),1,'Hoteles','imagenes/subcategorias/hoteles.png');
INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),1,'Posadas','imagenes/subcategorias/posadas.png');

INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),2,'Restaurantes','imagenes/subcategorias/restaurantes.png');
INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),2,'Cafeterias','imagenes/subcategorias/panaderias.png');

INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),3,'Aldeas','imagenes/subcategorias/aldeas.png');
INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),3,'Plazas','imagenes/subcategorias/plazas.png');
INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),3,'Parques','imagenes/subcategorias/parques.png');
INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),3,'Discos y Bares','imagenes/subcategorias/discos.png');

INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),4,'Iglesias','imagenes/subcategorias/iglesias.png');
INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),4,'Monasterios','imagenes/subcategorias/monasterios.png');
INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),4,'Santuarios','imagenes/subcategorias/santuarios.png');
INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),4,'Capillas','imagenes/subcategorias/capillas.png');

INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),5,'Museos','imagenes/subcategorias/museos.png');
INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),5,'Paseos Artesanales','imagenes/subcategorias/paseoartesanal.png');

INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),6,'Hospitales','imagenes/subcategorias/hospitales.png');
INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),6,'Clinicas','imagenes/subcategorias/clinicas.png');
INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),6,'Centros Asistenciales','imagenes/subcategorias/centrosasistenciales.png');

INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),7,'Bancos','imagenes/subcategorias/bancos.png');
INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),7,'Cajeros Automaticos','imagenes/subcategorias/cajeros.png');

INSERT INTO subcategoria values(nextval('subcategoria_idsubcategoria_seq'),8,'Gasolineras','imagenes/subcategorias/gasolineras.png');

